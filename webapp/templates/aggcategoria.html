{% extends "base.html" %}

{% block title %}Crea Categoria{% endblock %}

{% block content %}
<div class="container">
    <h3>Aggiungi una nuova categoria</h3>
    <form method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="nome">Nome Categoria</label>
            <input type="text" class="form-control" id="nome" name="nome" placeholder="Inserisci il nome della categoria" required>
        </div>
        <div class="form-group">
            <label for="immagine">Immagine Categoria</label>
            <input type="file" class="form-control-file" id="immagine" name="immagine" accept="image/*" required>
        </div>
        <div class="form-group">
            <label for="tipo">Tipo Categoria</label>
            <select class="form-control" id="tipo" name="tipo" required>
                <option value="principale">Categoria Principale</option>
                <option value="sottocategoria">Sottocategoria di:</option>
            </select>
        </div>
        <div class="form-group" id="select-genitore" style="display: none;">
            <label for="genitore">Categoria Genitore</label>
            <select class="form-control" id="genitore" name="genitore">
                <!-- Inserisci le opzioni per le categorie principali tramite un ciclo for -->
                {% for categoria in categorie_principali %}
                    <option value="{{ categoria.id }}">{{ categoria.nome }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Aggiungi Categoria</button>
    </form>
</div>

<script>
    // Mostra o nascondi il campo "Categoria Genitore" in base alla selezione dell'utente
    document.getElementById('tipo').addEventListener('change', function() {
        if (this.value === 'sottocategoria') {
            document.getElementById('select-genitore').style.display = 'block';
        } else {
            document.getElementById('select-genitore').style.display = 'none';
        }
    });
</script>
{% endblock %}
