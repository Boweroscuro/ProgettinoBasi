{% extends "base.html" %}

{% block title %}
Prodotti in vendita
{% endblock %}

{% block content %}
<body>
    <div class="container">
        <h2 align="center">Dettagli Prodotto</h2>
        <div class="row">
            <div class="col-md-6">
                <img src="{{ url_for('auth.get_immagine', idprodotto=prodotto.idprodotto) }}" alt="Immagine prodotto" style="max-width: 400px; max-height: 400px;">
            </div>
            <div class="col-md-6" style="border: 1px solid #e0e0e0;background-color:white ;border-radius: 5px; margin-bottom: 10px; padding: 10px;">
                <h1>{{ prodotto.nome }}</h1>
                <h2>{{ prodotto.costo }} €</h2>
                <h4> Pezzi disponibili:{{ prodotto.quantità }}</h4>
                <p>Descrizione: {{ prodotto.descrizione }}</p>
                
                <!-- Altri dettagli del prodotto come prezzo, disponibilità, etc. -->
                {% if not utente.privilegi %} 
                    {% if prodotto.quantità > 0 %}  
                    <form id="aggiungi-form-{{ prodotto.idprodotto }}" action="{{ url_for('auth.aggcarrello', idprodotto=prodotto.idprodotto) }}" method="post">
                        <button type="submit" class="btn btn-primary">Aggiungi al carrello</button>
                    </form>
                    {% else %}
                    <p>Prodotto non disponibile</p>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
    <div align="center">
        {% if utente.privilegi %}
            {% if utente.idutente == prodotto.idu %}
                <a href="{{ request.referrer or url_for('auth.hvenditori') }}" class="btn btn-success">Indietro</a>
            {% else %}
                <a href="{{ request.referrer or url_for('views.home') }}" class="btn btn-success">Indietro</a>
            {% endif %}
        {% else %}
            <a href="{{ request.referrer or url_for('views.home') }}" class="btn btn-success">Indietro</a>
        {% endif %}
    </div>
{% endblock %}
